{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst defer_to_connect_1 = require(\"defer-to-connect\");\nconst util_1 = require(\"util\");\nconst nodejsMajorVersion = Number(process.versions.node.split('.')[0]);\nconst timer = request => {\n  if (request.timings) {\n    return request.timings;\n  }\n  const timings = {\n    start: Date.now(),\n    socket: undefined,\n    lookup: undefined,\n    connect: undefined,\n    secureConnect: undefined,\n    upload: undefined,\n    response: undefined,\n    end: undefined,\n    error: undefined,\n    abort: undefined,\n    phases: {\n      wait: undefined,\n      dns: undefined,\n      tcp: undefined,\n      tls: undefined,\n      request: undefined,\n      firstByte: undefined,\n      download: undefined,\n      total: undefined\n    }\n  };\n  request.timings = timings;\n  const handleError = origin => {\n    const emit = origin.emit.bind(origin);\n    origin.emit = (event, ...args) => {\n      // Catches the `error` event\n      if (event === 'error') {\n        timings.error = Date.now();\n        timings.phases.total = timings.error - timings.start;\n        origin.emit = emit;\n      }\n      // Saves the original behavior\n      return emit(event, ...args);\n    };\n  };\n  handleError(request);\n  const onAbort = () => {\n    timings.abort = Date.now();\n    // Let the `end` response event be responsible for setting the total phase,\n    // unless the Node.js major version is >= 13.\n    if (!timings.response || nodejsMajorVersion >= 13) {\n      timings.phases.total = Date.now() - timings.start;\n    }\n  };\n  request.prependOnceListener('abort', onAbort);\n  const onSocket = socket => {\n    timings.socket = Date.now();\n    timings.phases.wait = timings.socket - timings.start;\n    if (util_1.types.isProxy(socket)) {\n      return;\n    }\n    const lookupListener = () => {\n      timings.lookup = Date.now();\n      timings.phases.dns = timings.lookup - timings.socket;\n    };\n    socket.prependOnceListener('lookup', lookupListener);\n    defer_to_connect_1.default(socket, {\n      connect: () => {\n        timings.connect = Date.now();\n        if (timings.lookup === undefined) {\n          socket.removeListener('lookup', lookupListener);\n          timings.lookup = timings.connect;\n          timings.phases.dns = timings.lookup - timings.socket;\n        }\n        timings.phases.tcp = timings.connect - timings.lookup;\n        // This callback is called before flushing any data,\n        // so we don't need to set `timings.phases.request` here.\n      },\n\n      secureConnect: () => {\n        timings.secureConnect = Date.now();\n        timings.phases.tls = timings.secureConnect - timings.connect;\n      }\n    });\n  };\n  if (request.socket) {\n    onSocket(request.socket);\n  } else {\n    request.prependOnceListener('socket', onSocket);\n  }\n  const onUpload = () => {\n    var _a;\n    timings.upload = Date.now();\n    timings.phases.request = timings.upload - ((_a = timings.secureConnect) !== null && _a !== void 0 ? _a : timings.connect);\n  };\n  const writableFinished = () => {\n    if (typeof request.writableFinished === 'boolean') {\n      return request.writableFinished;\n    }\n    // Node.js doesn't have `request.writableFinished` property\n    return request.finished && request.outputSize === 0 && (!request.socket || request.socket.writableLength === 0);\n  };\n  if (writableFinished()) {\n    onUpload();\n  } else {\n    request.prependOnceListener('finish', onUpload);\n  }\n  request.prependOnceListener('response', response => {\n    timings.response = Date.now();\n    timings.phases.firstByte = timings.response - timings.upload;\n    response.timings = timings;\n    handleError(response);\n    response.prependOnceListener('end', () => {\n      timings.end = Date.now();\n      timings.phases.download = timings.end - timings.response;\n      timings.phases.total = timings.end - timings.start;\n    });\n    response.prependOnceListener('aborted', onAbort);\n  });\n  return timings;\n};\nexports.default = timer;\n// For CommonJS default export support\nmodule.exports = timer;\nmodule.exports.default = timer;","map":{"version":3,"names":["Object","defineProperty","exports","value","defer_to_connect_1","require","util_1","nodejsMajorVersion","Number","process","versions","node","split","timer","request","timings","start","Date","now","socket","undefined","lookup","connect","secureConnect","upload","response","end","error","abort","phases","wait","dns","tcp","tls","firstByte","download","total","handleError","origin","emit","bind","event","args","onAbort","prependOnceListener","onSocket","types","isProxy","lookupListener","default","removeListener","onUpload","_a","writableFinished","finished","outputSize","writableLength","module"],"sources":["/home/spartan/Documents/vue.js/demo/node_modules/@szmarczak/http-timer/dist/source/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst defer_to_connect_1 = require(\"defer-to-connect\");\nconst util_1 = require(\"util\");\nconst nodejsMajorVersion = Number(process.versions.node.split('.')[0]);\nconst timer = (request) => {\n    if (request.timings) {\n        return request.timings;\n    }\n    const timings = {\n        start: Date.now(),\n        socket: undefined,\n        lookup: undefined,\n        connect: undefined,\n        secureConnect: undefined,\n        upload: undefined,\n        response: undefined,\n        end: undefined,\n        error: undefined,\n        abort: undefined,\n        phases: {\n            wait: undefined,\n            dns: undefined,\n            tcp: undefined,\n            tls: undefined,\n            request: undefined,\n            firstByte: undefined,\n            download: undefined,\n            total: undefined\n        }\n    };\n    request.timings = timings;\n    const handleError = (origin) => {\n        const emit = origin.emit.bind(origin);\n        origin.emit = (event, ...args) => {\n            // Catches the `error` event\n            if (event === 'error') {\n                timings.error = Date.now();\n                timings.phases.total = timings.error - timings.start;\n                origin.emit = emit;\n            }\n            // Saves the original behavior\n            return emit(event, ...args);\n        };\n    };\n    handleError(request);\n    const onAbort = () => {\n        timings.abort = Date.now();\n        // Let the `end` response event be responsible for setting the total phase,\n        // unless the Node.js major version is >= 13.\n        if (!timings.response || nodejsMajorVersion >= 13) {\n            timings.phases.total = Date.now() - timings.start;\n        }\n    };\n    request.prependOnceListener('abort', onAbort);\n    const onSocket = (socket) => {\n        timings.socket = Date.now();\n        timings.phases.wait = timings.socket - timings.start;\n        if (util_1.types.isProxy(socket)) {\n            return;\n        }\n        const lookupListener = () => {\n            timings.lookup = Date.now();\n            timings.phases.dns = timings.lookup - timings.socket;\n        };\n        socket.prependOnceListener('lookup', lookupListener);\n        defer_to_connect_1.default(socket, {\n            connect: () => {\n                timings.connect = Date.now();\n                if (timings.lookup === undefined) {\n                    socket.removeListener('lookup', lookupListener);\n                    timings.lookup = timings.connect;\n                    timings.phases.dns = timings.lookup - timings.socket;\n                }\n                timings.phases.tcp = timings.connect - timings.lookup;\n                // This callback is called before flushing any data,\n                // so we don't need to set `timings.phases.request` here.\n            },\n            secureConnect: () => {\n                timings.secureConnect = Date.now();\n                timings.phases.tls = timings.secureConnect - timings.connect;\n            }\n        });\n    };\n    if (request.socket) {\n        onSocket(request.socket);\n    }\n    else {\n        request.prependOnceListener('socket', onSocket);\n    }\n    const onUpload = () => {\n        var _a;\n        timings.upload = Date.now();\n        timings.phases.request = timings.upload - ((_a = timings.secureConnect) !== null && _a !== void 0 ? _a : timings.connect);\n    };\n    const writableFinished = () => {\n        if (typeof request.writableFinished === 'boolean') {\n            return request.writableFinished;\n        }\n        // Node.js doesn't have `request.writableFinished` property\n        return request.finished && request.outputSize === 0 && (!request.socket || request.socket.writableLength === 0);\n    };\n    if (writableFinished()) {\n        onUpload();\n    }\n    else {\n        request.prependOnceListener('finish', onUpload);\n    }\n    request.prependOnceListener('response', (response) => {\n        timings.response = Date.now();\n        timings.phases.firstByte = timings.response - timings.upload;\n        response.timings = timings;\n        handleError(response);\n        response.prependOnceListener('end', () => {\n            timings.end = Date.now();\n            timings.phases.download = timings.end - timings.response;\n            timings.phases.total = timings.end - timings.start;\n        });\n        response.prependOnceListener('aborted', onAbort);\n    });\n    return timings;\n};\nexports.default = timer;\n// For CommonJS default export support\nmodule.exports = timer;\nmodule.exports.default = timer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}