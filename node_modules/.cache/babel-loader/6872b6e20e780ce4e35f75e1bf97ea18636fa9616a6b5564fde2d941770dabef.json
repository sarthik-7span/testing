{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TimeoutError = void 0;\nconst net = require(\"net\");\nconst unhandle_1 = require(\"./unhandle\");\nconst reentry = Symbol('reentry');\nconst noop = () => {};\nclass TimeoutError extends Error {\n  constructor(threshold, event) {\n    super(`Timeout awaiting '${event}' for ${threshold}ms`);\n    this.event = event;\n    this.name = 'TimeoutError';\n    this.code = 'ETIMEDOUT';\n  }\n}\nexports.TimeoutError = TimeoutError;\nexports.default = (request, delays, options) => {\n  if (reentry in request) {\n    return noop;\n  }\n  request[reentry] = true;\n  const cancelers = [];\n  const {\n    once,\n    unhandleAll\n  } = unhandle_1.default();\n  const addTimeout = (delay, callback, event) => {\n    var _a;\n    const timeout = setTimeout(callback, delay, delay, event);\n    (_a = timeout.unref) === null || _a === void 0 ? void 0 : _a.call(timeout);\n    const cancel = () => {\n      clearTimeout(timeout);\n    };\n    cancelers.push(cancel);\n    return cancel;\n  };\n  const {\n    host,\n    hostname\n  } = options;\n  const timeoutHandler = (delay, event) => {\n    request.destroy(new TimeoutError(delay, event));\n  };\n  const cancelTimeouts = () => {\n    for (const cancel of cancelers) {\n      cancel();\n    }\n    unhandleAll();\n  };\n  request.once('error', error => {\n    cancelTimeouts();\n    // Save original behavior\n    /* istanbul ignore next */\n    if (request.listenerCount('error') === 0) {\n      throw error;\n    }\n  });\n  request.once('close', cancelTimeouts);\n  once(request, 'response', response => {\n    once(response, 'end', cancelTimeouts);\n  });\n  if (typeof delays.request !== 'undefined') {\n    addTimeout(delays.request, timeoutHandler, 'request');\n  }\n  if (typeof delays.socket !== 'undefined') {\n    const socketTimeoutHandler = () => {\n      timeoutHandler(delays.socket, 'socket');\n    };\n    request.setTimeout(delays.socket, socketTimeoutHandler);\n    // `request.setTimeout(0)` causes a memory leak.\n    // We can just remove the listener and forget about the timer - it's unreffed.\n    // See https://github.com/sindresorhus/got/issues/690\n    cancelers.push(() => {\n      request.removeListener('timeout', socketTimeoutHandler);\n    });\n  }\n  once(request, 'socket', socket => {\n    var _a;\n    const {\n      socketPath\n    } = request;\n    /* istanbul ignore next: hard to test */\n    if (socket.connecting) {\n      const hasPath = Boolean(socketPath !== null && socketPath !== void 0 ? socketPath : net.isIP((_a = hostname !== null && hostname !== void 0 ? hostname : host) !== null && _a !== void 0 ? _a : '') !== 0);\n      if (typeof delays.lookup !== 'undefined' && !hasPath && typeof socket.address().address === 'undefined') {\n        const cancelTimeout = addTimeout(delays.lookup, timeoutHandler, 'lookup');\n        once(socket, 'lookup', cancelTimeout);\n      }\n      if (typeof delays.connect !== 'undefined') {\n        const timeConnect = () => addTimeout(delays.connect, timeoutHandler, 'connect');\n        if (hasPath) {\n          once(socket, 'connect', timeConnect());\n        } else {\n          once(socket, 'lookup', error => {\n            if (error === null) {\n              once(socket, 'connect', timeConnect());\n            }\n          });\n        }\n      }\n      if (typeof delays.secureConnect !== 'undefined' && options.protocol === 'https:') {\n        once(socket, 'connect', () => {\n          const cancelTimeout = addTimeout(delays.secureConnect, timeoutHandler, 'secureConnect');\n          once(socket, 'secureConnect', cancelTimeout);\n        });\n      }\n    }\n    if (typeof delays.send !== 'undefined') {\n      const timeRequest = () => addTimeout(delays.send, timeoutHandler, 'send');\n      /* istanbul ignore next: hard to test */\n      if (socket.connecting) {\n        once(socket, 'connect', () => {\n          once(request, 'upload-complete', timeRequest());\n        });\n      } else {\n        once(request, 'upload-complete', timeRequest());\n      }\n    }\n  });\n  if (typeof delays.response !== 'undefined') {\n    once(request, 'upload-complete', () => {\n      const cancelTimeout = addTimeout(delays.response, timeoutHandler, 'response');\n      once(request, 'response', cancelTimeout);\n    });\n  }\n  return cancelTimeouts;\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","TimeoutError","net","require","unhandle_1","reentry","Symbol","noop","Error","constructor","threshold","event","name","code","default","request","delays","options","cancelers","once","unhandleAll","addTimeout","delay","callback","_a","timeout","setTimeout","unref","call","cancel","clearTimeout","push","host","hostname","timeoutHandler","destroy","cancelTimeouts","error","listenerCount","response","socket","socketTimeoutHandler","removeListener","socketPath","connecting","hasPath","Boolean","isIP","lookup","address","cancelTimeout","connect","timeConnect","secureConnect","protocol","send","timeRequest"],"sources":["/home/spartan/Documents/vue.js/demo/node_modules/got/dist/source/core/utils/timed-out.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TimeoutError = void 0;\nconst net = require(\"net\");\nconst unhandle_1 = require(\"./unhandle\");\nconst reentry = Symbol('reentry');\nconst noop = () => { };\nclass TimeoutError extends Error {\n    constructor(threshold, event) {\n        super(`Timeout awaiting '${event}' for ${threshold}ms`);\n        this.event = event;\n        this.name = 'TimeoutError';\n        this.code = 'ETIMEDOUT';\n    }\n}\nexports.TimeoutError = TimeoutError;\nexports.default = (request, delays, options) => {\n    if (reentry in request) {\n        return noop;\n    }\n    request[reentry] = true;\n    const cancelers = [];\n    const { once, unhandleAll } = unhandle_1.default();\n    const addTimeout = (delay, callback, event) => {\n        var _a;\n        const timeout = setTimeout(callback, delay, delay, event);\n        (_a = timeout.unref) === null || _a === void 0 ? void 0 : _a.call(timeout);\n        const cancel = () => {\n            clearTimeout(timeout);\n        };\n        cancelers.push(cancel);\n        return cancel;\n    };\n    const { host, hostname } = options;\n    const timeoutHandler = (delay, event) => {\n        request.destroy(new TimeoutError(delay, event));\n    };\n    const cancelTimeouts = () => {\n        for (const cancel of cancelers) {\n            cancel();\n        }\n        unhandleAll();\n    };\n    request.once('error', error => {\n        cancelTimeouts();\n        // Save original behavior\n        /* istanbul ignore next */\n        if (request.listenerCount('error') === 0) {\n            throw error;\n        }\n    });\n    request.once('close', cancelTimeouts);\n    once(request, 'response', (response) => {\n        once(response, 'end', cancelTimeouts);\n    });\n    if (typeof delays.request !== 'undefined') {\n        addTimeout(delays.request, timeoutHandler, 'request');\n    }\n    if (typeof delays.socket !== 'undefined') {\n        const socketTimeoutHandler = () => {\n            timeoutHandler(delays.socket, 'socket');\n        };\n        request.setTimeout(delays.socket, socketTimeoutHandler);\n        // `request.setTimeout(0)` causes a memory leak.\n        // We can just remove the listener and forget about the timer - it's unreffed.\n        // See https://github.com/sindresorhus/got/issues/690\n        cancelers.push(() => {\n            request.removeListener('timeout', socketTimeoutHandler);\n        });\n    }\n    once(request, 'socket', (socket) => {\n        var _a;\n        const { socketPath } = request;\n        /* istanbul ignore next: hard to test */\n        if (socket.connecting) {\n            const hasPath = Boolean(socketPath !== null && socketPath !== void 0 ? socketPath : net.isIP((_a = hostname !== null && hostname !== void 0 ? hostname : host) !== null && _a !== void 0 ? _a : '') !== 0);\n            if (typeof delays.lookup !== 'undefined' && !hasPath && typeof socket.address().address === 'undefined') {\n                const cancelTimeout = addTimeout(delays.lookup, timeoutHandler, 'lookup');\n                once(socket, 'lookup', cancelTimeout);\n            }\n            if (typeof delays.connect !== 'undefined') {\n                const timeConnect = () => addTimeout(delays.connect, timeoutHandler, 'connect');\n                if (hasPath) {\n                    once(socket, 'connect', timeConnect());\n                }\n                else {\n                    once(socket, 'lookup', (error) => {\n                        if (error === null) {\n                            once(socket, 'connect', timeConnect());\n                        }\n                    });\n                }\n            }\n            if (typeof delays.secureConnect !== 'undefined' && options.protocol === 'https:') {\n                once(socket, 'connect', () => {\n                    const cancelTimeout = addTimeout(delays.secureConnect, timeoutHandler, 'secureConnect');\n                    once(socket, 'secureConnect', cancelTimeout);\n                });\n            }\n        }\n        if (typeof delays.send !== 'undefined') {\n            const timeRequest = () => addTimeout(delays.send, timeoutHandler, 'send');\n            /* istanbul ignore next: hard to test */\n            if (socket.connecting) {\n                once(socket, 'connect', () => {\n                    once(request, 'upload-complete', timeRequest());\n                });\n            }\n            else {\n                once(request, 'upload-complete', timeRequest());\n            }\n        }\n    });\n    if (typeof delays.response !== 'undefined') {\n        once(request, 'upload-complete', () => {\n            const cancelTimeout = addTimeout(delays.response, timeoutHandler, 'response');\n            once(request, 'response', cancelTimeout);\n        });\n    }\n    return cancelTimeouts;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}